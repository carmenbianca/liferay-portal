<%--
/*
 * SPDX-FileCopyrightText: Â© 2020 Liferay, Inc. <https://liferay.com>
 * SPDX-License-Identifier: LGPL-2.1-or-later
 */
--%>

<aui:select label="scope" name="preferences--searchScope--" value="<%= searchDisplayContext.getSearchScopePreferenceString() %>">
	<aui:option label="this-site" value="this-site" />
	<aui:option label="everything" value="everything" />
	<aui:option label="let-the-user-choose" value="let-the-user-choose" />
</aui:select>

<aui:fieldset cssClass="facet-configuration-container" label="facets">

	<%
	List<SearchFacet> searchFacets = ListUtil.copy(searchDisplayContext.getSearchFacets());

	for (SearchFacet searchFacet : searchFacets) {
		searchFacet.init(company.getCompanyId(), searchDisplayContext.getSearchConfiguration());
	}

	searchFacets = ListUtil.sort(searchFacets, SearchFacetComparator.INSTANCE);

	for (SearchFacet searchFacet : searchFacets) {
	%>

		<aui:input label="<%= searchFacet.getTitle() %>" name='<%= "preferences--" + searchFacet.getClassName() + "--" %>' type="checkbox" value="<%= searchDisplayContext.isDisplayFacet(searchFacet.getClassName()) %>" />

		<div class="facet-configuration" id="<portlet:namespace /><%= AUIUtil.normalizeId(searchFacet.getClassName()) %>FacetConfiguration" style="margin-left: 40px;">
			<liferay-ui:toggle-area
				align="none"
				defaultShowContent="hide"
				hideMessage='<%= LanguageUtil.get(request, "configure") %>'
				id="<%= StringUtil.replace(searchFacet.getClassName(), CharPool.PERIOD, CharPool.UNDERLINE) %>"
				showMessage='<%= LanguageUtil.get(request, "configure") %>'
			>

				<%
				request.setAttribute("facet_configuration.jsp-searchFacet", searchFacet);
				%>

				<div class="advance-configuration">
					<liferay-util:include page="/facets/facet_configuration.jsp" servletContext="<%= application %>" />
				</div>
			</liferay-ui:toggle-area>
		</div>

		<hr />

		<aui:script>
			Liferay.Util.toggleBoxes(
				'<portlet:namespace /><%= AUIUtil.normalizeId(searchFacet.getClassName()) %>',
				'<portlet:namespace /><%= AUIUtil.normalizeId(searchFacet.getClassName()) %>FacetConfiguration'
			);
		</aui:script>

	<%
	}
	%>

</aui:fieldset>